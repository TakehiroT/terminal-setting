# tmux è¨­å®š - Zellijé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãªã—ã§ç›´æ¥æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚­ãƒ¼ (Ctrl+a) - å¾“æ¥æ“ä½œã‚‚æ®‹ã™
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# ãƒã‚¦ã‚¹ã‚µãƒãƒ¼ãƒˆ
set -g mouse on

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º
set -g history-limit 10000

# 256è‰²å¯¾å¿œ
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ»ãƒšã‚¤ãƒ³ç•ªå·ã‚’1ã‹ã‚‰é–‹å§‹
set -g base-index 1
setw -g pane-base-index 1

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ãŸæ™‚ã«ç•ªå·ã‚’è©°ã‚ã‚‹
set -g renumber-windows on

# ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é…å»¶ã‚’ç„¡åŠ¹åŒ– (vimå¯¾å¿œ)
set -sg escape-time 0

# =============================================
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼è¨­å®š (2è¡Œ)
# =============================================
set -g status-position top
set -g status 2
set -g status-style 'bg=#3c3836'
set -g status-justify centre

# å·¦å´ãƒ»å³å´ã¯ç©ºã«
set -g status-left ''
set -g status-left-length 0
set -g status-right ''
set -g status-right-length 0

# ã‚¿ãƒ–ï¼ˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ« - ãƒã‚¦ã‚¹ã‚¯ãƒªãƒƒã‚¯å¯èƒ½
set -g window-status-format '#[bg=#504945,fg=#a89984] #I:#W '
set -g window-status-current-format '#[bg=#83a598,fg=#282828,bold] #I:#W '
set -g window-status-separator ' '

# 2è¡Œç›®: ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ
set -g status-format[1] '#[align=centre,bg=#3c3836,fg=#fabd2f]C-p#[fg=#ebdbb2]Pane  #[fg=#fabd2f]C-t#[fg=#ebdbb2]Tab  #[fg=#fabd2f]C-n#[fg=#ebdbb2]Resize  #[fg=#fabd2f]C-s#[fg=#ebdbb2]Scroll  #[fg=#fb4934]C-q#[fg=#ebdbb2]Quit  #[fg=#b8bb26]M-m#[fg=#ebdbb2]Menu'

# ãƒšã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ï¼ˆä¸Šéƒ¨ã«è¡¨ç¤ºï¼‰
set -g pane-border-status top
set -g pane-border-format ' #{pane_title} '

# ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (Alt+m)
bind -n M-m display-menu -T " Actions " -x C -y C \
  "ğŸš€ Activate Skills" a "run-shell -b '~/terminal-setting/tmux/scripts/activate-skills.sh #{session_name} >/dev/null 2>&1'" \
  "ğŸ”„ Restart Claude/Codex" r "run-shell -b 'tmux send-keys -t #{session_name}:Impl.1 /exit; tmux send-keys -t #{session_name}:Impl.1 Enter; tmux send-keys -t #{session_name}:Impl.2 /exit; tmux send-keys -t #{session_name}:Impl.2 Enter'" \
  "ğŸ“‹ Go to Git" g "select-window -t #{session_name}:Git" \
  "ğŸ§¹ Cleanup & Restart" c "run-shell -b '~/terminal-setting/tmux/scripts/cleanup-restart.sh #{session_name} >/dev/null 2>&1'"

# ãƒšã‚¤ãƒ³ãƒœãƒ¼ãƒ€ãƒ¼
set -g pane-border-style 'fg=#504945'
set -g pane-active-border-style 'fg=#b8bb26'

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ (vié¢¨)
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# =============================================
# Zellijé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
# =============================================

# --- Ctrl+p: ãƒšã‚¤ãƒ³æ“ä½œ (Pane) ---
# çŸ¢å°ã‚­ãƒ¼/h/j/k/l: ãƒšã‚¤ãƒ³ç§»å‹•
bind -n C-p switch-client -T pane-mode
bind -T pane-mode Left select-pane -L
bind -T pane-mode Down select-pane -D
bind -T pane-mode Up select-pane -U
bind -T pane-mode Right select-pane -R
bind -T pane-mode h select-pane -L
bind -T pane-mode j select-pane -D
bind -T pane-mode k select-pane -U
bind -T pane-mode l select-pane -R
bind -T pane-mode n split-window -v -c "#{pane_current_path}"
bind -T pane-mode r split-window -h -c "#{pane_current_path}"
bind -T pane-mode x kill-pane
bind -T pane-mode f resize-pane -Z
bind -T pane-mode Escape switch-client -T root

# --- Ctrl+t: ã‚¿ãƒ–æ“ä½œ (Tab/Window) ---
bind -n C-t switch-client -T tab-mode
bind -T tab-mode Left previous-window
bind -T tab-mode Right next-window
bind -T tab-mode h previous-window
bind -T tab-mode l next-window
bind -T tab-mode n new-window -c "#{pane_current_path}"
bind -T tab-mode x kill-window
bind -T tab-mode r command-prompt -I "#W" "rename-window '%%'"
bind -T tab-mode 1 select-window -t 1
bind -T tab-mode 2 select-window -t 2
bind -T tab-mode 3 select-window -t 3
bind -T tab-mode 4 select-window -t 4
bind -T tab-mode 5 select-window -t 5
bind -T tab-mode Escape switch-client -T root

# --- Ctrl+n: ãƒªã‚µã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰ (Resize) ---
bind -n C-n switch-client -T resize-mode
bind -T resize-mode Left resize-pane -L 5
bind -T resize-mode Down resize-pane -D 5
bind -T resize-mode Up resize-pane -U 5
bind -T resize-mode Right resize-pane -R 5
bind -T resize-mode h resize-pane -L 5
bind -T resize-mode j resize-pane -D 5
bind -T resize-mode k resize-pane -U 5
bind -T resize-mode l resize-pane -R 5
bind -T resize-mode Escape switch-client -T root

# --- Ctrl+s: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ‰ (Scroll/Copy) ---
bind -n C-s copy-mode

# --- Ctrl+o: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰ (Session) ---
bind -n C-o switch-client -T session-mode
bind -T session-mode d detach-client
bind -T session-mode w choose-tree -Zs
bind -T session-mode Escape switch-client -T root

# --- Ctrl+q: çµ‚äº†ç¢ºèª ---
bind -n C-q confirm-before -p "Kill session? (y/n)" kill-session

# --- Alt+æ•°å­—: ã‚¿ãƒ–ç›´æ¥ç§»å‹• (zellijã¨åŒã˜) ---
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5

# =============================================
# å¾“æ¥ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹æ“ä½œã‚‚æ®‹ã™
# =============================================
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5
bind R source-file ~/.tmux.conf \; display "Config reloaded!"

# =============================================
# ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ (Zellijé¢¨)
# =============================================
# Ctrl+p â†’ ãƒšã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰
#          çŸ¢å°/h/j/k/l: ç§»å‹•, n: æ–°è¦(ä¸‹), r: æ–°è¦(å³), x: é–‰ã˜ã‚‹, f: å…¨ç”»é¢
#
# Ctrl+t â†’ ã‚¿ãƒ–ãƒ¢ãƒ¼ãƒ‰
#          å·¦å³çŸ¢å°/h/l: ç§»å‹•, n: æ–°è¦, x: é–‰ã˜ã‚‹, r: ãƒªãƒãƒ¼ãƒ , 1-5: ç•ªå·ã§ç§»å‹•
#
# Ctrl+n â†’ ãƒªã‚µã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰
#          çŸ¢å°/h/j/k/l: ã‚µã‚¤ã‚ºå¤‰æ›´
#
# Ctrl+s â†’ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«/ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰
#          j/k: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«, v: é¸æŠé–‹å§‹, y: ã‚³ãƒ”ãƒ¼
#
# Ctrl+o â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰
#          d: ãƒ‡ã‚¿ãƒƒãƒ, w: ã‚»ãƒƒã‚·ãƒ§ãƒ³é¸æŠ
#
# Ctrl+q â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
#
# Alt+1-5 â†’ ã‚¿ãƒ–ç›´æ¥ç§»å‹•
#
# Esc â†’ ãƒ¢ãƒ¼ãƒ‰çµ‚äº†
